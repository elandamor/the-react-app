{"version":3,"sources":["utilities/strapiHelpers.ts","pages/SocialAuth/index.tsx"],"names":["BASE","API_HOST","socialAuth","provider","accessToken","a","axios","get","Promise","reject","SocialAuth","history","useHistory","location","useLocation","useParams","login","strapiHelpers","search","data","console","log","useEffect","push"],"mappings":"+MAIMA,E,MAAOC,GAAY,GAoBV,GAAEC,WAbD,uCAAG,WACjBC,EACAC,GAFiB,SAAAC,EAAA,+EAKFC,IAAMC,IACjBP,EAAO,SAAWG,EAAW,YAAcC,GAN9B,iGASRI,QAAQC,OAAR,OATQ,wDAAH,yDCsBDC,UA7BQ,WACrB,IAAMC,EAAUC,cACVC,EAAWC,cACTX,EAAaY,cAAbZ,SAEFa,EAAK,uCAAG,8BAAAX,EAAA,+EAEaY,EAAcf,WACnCC,EACAU,EAASK,QAJD,gBAEFC,EAFE,EAEFA,KAIRC,QAAQC,IAAI,CAAEF,SANJ,gDAQVC,QAAQC,IAAR,MARU,yDAAH,qDAqBX,OATAC,qBAAU,WAER,IAAKnB,IAAaU,EAASK,OACzB,OAAOP,EAAQY,KAAK,KAGtBP,OAGK","file":"static/js/10.82510f93.chunk.js","sourcesContent":["import axios, { AxiosResponse } from 'axios';\nimport { API_HOST } from '../constants';\nimport { UsersPermissionsUser } from '../generated/graphql';\n\nconst BASE = API_HOST || '';\n\nexport type StrapiLoginPayload = {\n  jwt: string;\n  user: UsersPermissionsUser;\n};\n\nconst socialAuth = async (\n  provider: string,\n  accessToken: string,\n): Promise<AxiosResponse<StrapiLoginPayload>> => {\n  try {\n    return await axios.get(\n      BASE + '/auth/' + provider + '/callback' + accessToken,\n    );\n  } catch (error) {\n    return Promise.reject(error);\n  }\n};\n\nexport default { socialAuth };\n","import { FC, useEffect } from 'react';\nimport { useHistory, useLocation, useParams } from 'react-router';\nimport strapiHelpers from '../../utilities/strapiHelpers';\n\nconst SocialAuth: FC = () => {\n  const history = useHistory();\n  const location = useLocation();\n  const { provider } = useParams<{ provider: string }>();\n\n  const login = async () => {\n    try {\n      const { data } = await strapiHelpers.socialAuth(\n        provider,\n        location.search,\n      );\n      console.log({ data });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    // If the link has no provider or accessToken data redirect to login\n    if (!provider || !location.search) {\n      return history.push('/');\n    }\n    // Initiate login\n    login();\n  });\n\n  return null;\n};\n\nexport default SocialAuth;\n"],"sourceRoot":""}